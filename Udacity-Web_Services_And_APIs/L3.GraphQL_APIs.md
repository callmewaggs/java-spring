# L2.GraphQL APIs

## 1. Introduction

## 2. Overview

<img width="702" src="https://user-images.githubusercontent.com/35681772/65649850-32ba1f80-e043-11e9-887c-205e3447b90b.png">

Rest is the most popular way to expose data from a server through an API. However, the response returned from a Rest API is very rigid, and returns all of the data points as designed by the developer, whether you need them or not.

<img width="1538" src="https://user-images.githubusercontent.com/35681772/65649851-3352b600-e043-11e9-85bd-3d7e6d205a92.png">

[GraphQL](https://graphql.org/) is a query language for APIs or a syntax that describes how to ask for data and is generally used to load data from a server to a client. The neat thing about GraphQL is that it lets the calling client or the user specify exactly what data it needs. GraphQL offers maximum efficiency and flexibility because it allows the calling client to specify exactly what data it needs.

<img width="708" src="https://user-images.githubusercontent.com/35681772/65649852-3352b600-e043-11e9-81c5-9ba75ffcbe88.png">

Query of GraphQL looks like this. 

To include GraphQL in your project, a couple of dependencies are needed:

 * graphql-spring-boot-starter - This starter is very helpful because it will add and automatically configure a GraphQL Servlet that you can access at /graphql . This starter will also use a GraphQL schema library to parse all schema files found on the classpath. The starter will also set up an endpoint that can access POST requests.

```xml
<dependency>
    <groupId>com.graphql-java</groupId>
    <artifactId>graphql-spring-boot-starter</artifactId>
    <version>5.0.2</version>
</dependency>
```

 * graphql-java-tools - A helper library to parse the GraphQL schema.

```xml
<dependency>
    <groupId>com.graphql-java</groupId>
    <artifactId>graphql-java-tools</artifactId>
    <version>5.2.4</version>
</dependency>
```

---

## 3. Schemas

There is a concept that you should be aware of when dealing with GraphQL. It's the __schema.__

The GraphQL schema defines the data points offered via an API. The schema contains the data types and relationships between them and the set of operations available, things like queries for retrieving data and mutations for creating, updating, and deleting data.

The schema from the Case Study is shown below.

#### Sample Schema of GraphQL
```
type Location {
 id: ID!
 name: String!
 address: String!
}

type Query {
 findAllLocations: [Location]!
}

type Mutation {
 newLocation(name: String!, address: String) : Location!
 deleteLocation(id:ID!) : Boolean
 updateLocationName(newName: String!, id:ID!) : Location!
}
```

__There can only be one root Query and one root Mutation type in a schema file.__

__GraphQL schema files found on the classpath are processed and the necessary beans are wired.__

__The file extension for a GraphQL schema file : ```.graphqls```__

---

## 4. Operations

GraphQL offers operations on data like queries and mutations.

### Queries
__A query allows for the retrieving of data.__ Each query will have a specific object that it returns and based on the object returned, you can add or remove fields to match the exact data you need to fit your specific use case.

### Mutations
GraphQL has the ability to update the data stored on the server, by means of mutations. __Mutations, such as, create, update, or delete will change the data,__ unlike a query.

---

## 5. GraphiQL

A tool called __GraphiQL is a simple web app that is able to communicate with any GraphQL Server and execute queries and mutations__ against it.

---

