## 4. 서블릿 소개

스프링 웹 mvc 는 서블릿 기반으로 웹 애플리케이션을 쉽게 만드는 것을 도와주는 프레임 워크.

그럼 서블릿이란?

> '자바 서블릿(Java Servlet)은 자바를 사용하여 웹페이지를 동적으로 생성하는 서버측 프로그램 혹은 그 사양을 말하며, 흔히 "서블릿"이라 불린다. __자바 서블릿은 웹 서버의 성능을 향상하기 위해 사용되는 자바 클래스의 일종이다.__ 서블릿은 JSP와 비슷한 점이 있지만, JSP가 HTML 문서 안에 Java 코드를 포함하고 있는 반면, 서블릿은 자바 코드 안에 HTML을 포함하고 있다는 차이점이 있다.'

### 가장 기본적인 서블릿 애플리케이션 만들기

### 서블릿 (Servlet)
 * 자바 엔터프라이즈 에디션은 자바로 웹 애플리케이션 개발을 할 수 있는 스팩과 API 제공.
 * 그 중에 가장 중요한 클래스 중 하나가 __HttpServlet__.
 * 요청 당 쓰레드 (만들거나, ​__풀에서 가져다가​__ ) 사용. 하나의 요청을 처리할 때 마다 새로운 프로세스를 만들고 죽이는 식으로 동작하는게 아니라, 하나의 프로세스 내 자원을 공유하는 쓰레드를 만들어서 요청을 처리.

### 서블릿 등장 이전에 사용하던 기술인 CGI (Common Gateway Interface)
 * 요청 당 프로세스를 만들어 사용

### 서블릿의 장점 (CGI에 비해)
 * 빠르다.
 * 플랫폼 독립적
 * 보안
 * 이식성

### 서블릿 엔진 또는 서블릿 컨테이너 (톰캣, 제티, 언더토, ...) : 서블릿 스펙을 구현 및 준수한 컨테이너
 * 세션 관리
 * 네트워크 서비스
 * MIME​ 기반 메시지 인코딩, 디코딩
 * 서블릿 생명주기 관리
 * ...

우리가 만든 서블릿 애플리케이션은 우리가 직접 실행할 수 없다. 서블릿 컨테이너가 실행할 수 있기 때문에 우리는 서블릿 컨테이너를 사용해야 한다. 

### 서블릿 ​생명주기
 * 서블릿 컨테이너가 서블릿 인스턴스의 init() 메소드를 호출하여 초기화 한다.
   * 최초 요청을 받았을 때 한번 초기화 하고 나면 그 다음 요청부터는 이 과정을 생략한다.
   * 그렇기 때문에 서블릿 컨테이너는 최초 모든 서블릿을 모두 호출을 해서 init() 을 호출해 둔 다음 요청이 들어왔을 때 다시 실행하지 않도록 한다. 로딩이 되게끔 요청을 보내놓는 것(init() 과정을 생략하고자).

 * 서블릿이 초기화 된 다음부터 클라이언트의 요청을 처리할 수 있다. 각 요청은 별도의 쓰레드로 처리하고 이 때 서블릿 인스턴스의 service() 메소드를 호출한다.
   * 이 안에서 HTTP 요청을 받고 클라이언트로 보낼 HTTP 응답을 만든다.
   * service()는 보통 HTTP Method에 따라 doGet(), doPost() 등으로 처리를 위임한다.
   * 따라서 보통 doGet() 또는 doPost()를 구현한다.

 * 서블릿 컨테이너 판단에 따라 해당 서블릿을 메모리에서 내려야 할 시점에 destroy()를 호출한다.

---